<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Webtoon Image Combiner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      padding: 20px;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    .box {
      background: #020617;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 15px;
    }
    input, button {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-size: 14px;
    }
    button {
      background: #2563eb;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #1d4ed8;
    }
    #log {
      font-size: 12px;
      margin-top: 10px;
      color: #93c5fd;
    }
  </style>
</head>
<body><h1>Webtoon Bulk Image Combiner (No Quality Loss)</h1><div class="box">
  <label>Select Images (Bulk Upload)</label>
  <input type="file" id="images" multiple accept="image/*" />
</div><div class="box">
  <label>Images per Output (Calculator)</label>
  <input type="number" id="perOutput" value="3" min="1" />
  <label>Total Outputs Required</label>
  <input type="number" id="totalOutputs" value="1" min="1" />
</div><div class="box">
  <button onclick="processImages()">Generate & Download All Outputs</button>
  <div id="log"></div>
</div><script>
async function processImages() {
  const files = [...document.getElementById('images').files];
  const perOutput = parseInt(document.getElementById('perOutput').value);
  const totalOutputs = parseInt(document.getElementById('totalOutputs').value);
  const log = document.getElementById('log');

  if (files.length === 0) {
    alert('Please upload images');
    return;
  }

  const zip = new JSZip();
  let index = 0;

  for (let o = 1; o <= totalOutputs; o++) {
    const slice = files.slice(index, index + perOutput);
    if (slice.length === 0) break;

    const images = await Promise.all(slice.map(loadImage));
    const width = Math.max(...images.map(i => i.width));
    const height = images.reduce((sum, i) => sum + i.height, 0);

    const canvas = document.createElement('canvas');
    canvas.width = width;
    canvas.height = height;
    const ctx = canvas.getContext('2d');

    let y = 0;
    images.forEach(img => {
      ctx.drawImage(img, 0, y);
      y += img.height;
    });

    const blob = await new Promise(res => canvas.toBlob(res, 'image/png', 1.0));
    zip.file(`output_${o}.png`, blob);

    index += perOutput;
    log.innerText = `Created ${o} output(s)...`;
  }

  const content = await zip.generateAsync({ type: 'blob' });
  saveAs(content, 'webtoon_outputs.zip');
  log.innerText = 'All outputs downloaded successfully.';
}

function loadImage(file) {
  return new Promise(resolve => {
    const img = new Image();
    img.onload = () => resolve(img);
    img.src = URL.createObjectURL(file);
  });
}
</script></body>
</html>
