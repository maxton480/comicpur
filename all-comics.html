<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>All Comics - Comic Pur</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#0a0a0a;color:#e0e0e0;font-family:system-ui,-apple-system,sans-serif;padding-top:80px;}
.header{position:fixed;top:0;left:0;right:0;background:#0d0d0d;z-index:9999;border-bottom:2px solid #ff2e63;padding:10px 15px;}
.header-inner{max-width:1400px;margin:auto;display:flex;flex-direction:column;gap:10px;align-items:center;}
.logo{color:#ff2e63;font-size:1.7rem;font-weight:900;text-decoration:none;}
.search input{width:100%;max-width:600px;padding:14px 20px;border-radius:30px;border:none;background:#1a1a1a;color:white;font-size:1rem;}
.all-btn{background:#ff2e63;color:white;padding:10px 20px;border-radius:25px;font-weight:bold;text-decoration:none;}
.container{max-width:1400px;margin:0 auto;padding:20px;}
h1{text-align:center;color:#ff2e63;font-size:2.2rem;margin:20px 0 40px;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:18px;}
.card{border-radius:12px;overflow:hidden;background:#1a1a1a;box-shadow:0 6px 20px rgba(0,0,0,0.7);}
.card img{width:100%;height:200px;object-fit:cover;background:#222;}
.info{padding:12px;text-align:center;}
.title{font-size:0.98rem;font-weight:bold;color:#fff;}
.chap{color:#ff2e63;font-size:0.9rem;margin-top:4px;}
@media(min-width:768px){
  .header-inner{flex-direction:row;justify-content:space-between;}
  .grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:25px;}
  .card img{height:280px;}
}
</style>
</head>
<body>

<div class="header">
  <div class="header-inner">
    <a href="/" class="logo">Comic Pur</a>
    <input type="text" placeholder="Search comics..." oninput="searchNow(this.value)">
    <a href="all-comics.html" class="all-btn">All Comics</a>
  </div>
</div>

<div class="container">
  <h1>All Comics</h1>
  <div id="grid" class="grid"></div>
</div>

<script>
function searchNow(q) {
  q = q.trim().toLowerCase();
  if (q.length < 2) return;
  fetch('../data/comics.json')
    .then(r => r.json())
    .then(data => {
      const found = data.find(c => 
        c.title.toLowerCase().includes(q) || 
        (c.genre && c.genre.toLowerCase().includes(q))
      );
      if (found) location.href = `../comics/${found.slug}/index.html`;
    });
}

fetch('../data/comics.json')
  .then(r => r.json())
  .then(d => {
    document.getElementById('grid').innerHTML = d.map(c => `
      <div class="card" onclick="location.href='../comics/${c.slug}/index.html'">
        <img src="${c.cover}" loading="lazy" onerror="this.src='https://via.placeholder.com/300x400/333/666?text=No+Image'">
        <div class="info">
          <div class="title">${c.title}</div>
          <div class="chap">${c.latest}</div>
        </div>
      </div>`).join('');
  });
</script>
</body>
</html>
