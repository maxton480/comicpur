<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Comic Pur</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#0a0a0a;color:#e0e0e0;font-family:system-ui,sans-serif;}
.header{position:fixed;top:0;left:0;right:0;background:#0d0d0d;z-index:9999;border-bottom:2px solid #ff2e63;padding:12px 16px;}
.header-inner{max-width:1400px;margin:auto;display:flex;justify-content:space-between;align-items:center;}
.logo{color:#ff2e63;font-size:1.8rem;font-weight:900;text-decoration:none;}
.search-icon{color:#ff2e63;font-size:1.6rem;cursor:pointer;}
.all-btn{background:#ff2e63;color:white;padding:10px 20px;border-radius:25px;font-weight:bold;text-decoration:none;}
.slider{height:70vh;background:#111;display:flex;align-items:center;justify-content:center;color:#666;font-size:1.6rem;}
.latest{padding:40px 16px;}
.latest h2{text-align:center;color:#ff2e63;font-size:2rem;margin-bottom:30px;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:18px;}
.card{border-radius:12px;overflow:hidden;background:#1a1a1a;box-shadow:0 8px 25px rgba(0,0,0,0.6);transition:0.3s;cursor:pointer;}
.card:active{transform:scale(0.97);}
.card img{width:100%;height:210px;object-fit:cover;background:#222;}
.info{padding:12px;text-align:center;}
.title{font-size:0.98rem;font-weight:bold;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.chap{color:#ff2e63;font-size:0.9rem;margin-top:4px;}

/* Full Screen Search Popup */
.search-popup{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.98);z-index:99999;display:none;align-items:center;justify-content:center;padding:20px;}
.search-box{max-width:700px;width:100%;position:relative;}
.search-box input{width:100%;padding:20px 60px 20px 20px;font-size:1.5rem;border-radius:50px;background:#1a1a1a;border:none;color:white;outline:none;}
.search-box::after{content:"Ã—";position:absolute;right:20px;top:50%;transform:translateY(-50%);font-size:2rem;color:#ff2e63;cursor:pointer;}
.results{position:absolute;top:80px;left:0;right:0;background:#111;max-height:70vh;overflow-y:auto;border-radius:15px;padding:15px;display:none;}
.result-item{padding:15px;background:#1a1a1a;margin:8px 0;border-radius:12px;cursor:pointer;transition:0.2s;}
.result-item:hover{background:#ff2e63;color:black;}
@media(min-width:768px){
  .grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:25px;}
  .card img{height:300px;}
}
</style>
</head>
<body>

<div class="header">
  <div class="header-inner">
    <a href="https://maxton480.github.io/comicpur/" class="logo">Comic Pur</a>
    <div class="search-icon" onclick="openSearch()">Search</div>
    <a href="all-comics.html" class="all-btn">All Comics</a>
  </div>
</div>

<div class="slider">Auto Slide Banner Yahan Aayega</div>

<div class="latest">
  <h2>Latest Updates</h2>
  <div id="grid" class="grid"></div>
</div>

<!-- Full Screen Search Popup -->
<div class="search-popup" id="searchPopup">
  <div class="search-box">
    <input type="text" placeholder="Comic dhundho..." id="searchInput" autofocus>
    <div class="results" id="results"></div>
  </div>
</div>

<script>
fetch('data/comics.json')
.then(r=>r.json())
.then(d=>{
  window.comicsData = d; // cache kar diya
  document.getElementById('grid').innerHTML = d.map(c=>`
    <div class="card" onclick="location.href='comics/${c.slug}/index.html'">
      <img src="${c.cover}" loading="lazy">
      <div class="info">
        <div class="title">${c.title}</div>
        <div class="chap">${c.latest}</div>
      </div>
    </div>`).join('');
});

function openSearch(){
  document.getElementById('searchPopup').style.display = 'flex';
  document.getElementById('searchInput').focus();
}

function closeSearch(){
  document.getElementById('searchPopup').style.display = 'none';
  document.getElementById('results').innerHTML = '';
  document.getElementById('searchInput').value = '';
}

// Search input
document.getElementById('searchInput').addEventListener('input', function(e){
  const q = e.target.value.trim().toLowerCase();
  const results = document.getElementById('results');
  if(q.length < 1){
    results.style.display = 'none';
    return;
  }
  const filtered = window.comicsData.filter(c => c.title.toLowerCase().includes(q));
  if(filtered.length === 0){
    results.innerHTML = '<div style="text-align:center;padding:20px;color:#888;">Koi comic nahi mila</div>';
    results.style.display = 'block';
    return;
  }
  results.innerHTML = filtered.map(c=>`
    <div class="result-item" onclick="location.href='comics/${c.slug}/index.html'">
      <strong>${c.title}</strong><br>
      <small style="color:#ff2e63;">${c.latest}</small>
    </div>
  `).join('');
  results.style.display = 'block';
});

// Close on cross or Esc
document.querySelector('.search-box').addEventListener('click', function(e){
  if(e.target.tagName === 'DIV' && e.target !== this.querySelector('input')) closeSearch();
});
document.addEventListener('keydown', function(e){
  if(e.key === 'Escape') closeSearch();
});
</script>
</body>
</html>
